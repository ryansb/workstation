---
- dnf: name={{ item }} state=latest
  become: true
  with_items:
  - libcurl-devel
  - redhat-rpm-config
  tags:
  - packages
  when: ansible_distribution == 'Fedora'

- dnf: name={{ item }} state=absent
  become: true
  with_items:
  - evolution-help
  - evolution-ews
  - evolution
  tags:
  - packages

- include: teensy.yml
  when: ansible_distribution == 'Fedora' and teensy_dev == true

- include: u2f.yml
  when: ansible_distribution == 'Fedora' and u2f_dev == true

- include: github.yml

- include: todo.yml

- include: gsettings.yml
  when: "'gui' in group_names"

- dnf: name=msmtp state=latest
  become: true
  tags:
  - packages

- shell: creates=~/.local/bin/bugwarrior-pull
         pipsi install bugwarrior

- shell: creates=~/.local/bin/taskforge
         pipsi install taskforge

- shell: creates=~/.local/bin/git-review
         pipsi install git-review

- shell: creates=~/.local/bin/git-sweep
         pipsi install git-sweep

- shell: creates=~/.local/bin/aws
         pipsi install awscli

- shell: creates=~/.local/bin/awslogs
         pipsi install awslogs

- shell: creates=~/.local/bin/formica
         pipsi install formica-cli

- shell: creates=~/.local/bin/former
         pipsi install former

- file: path=~/.aws state=directory

- template: src={{ item }}
            dest=~/.{{ item }}
  with_items:
  - bugwarriorrc
  - mailrc
  - msmtprc
  - taskforgerc
  - aws/config

- copy: src=rht_web_proxy.pac dest=/etc/redhat-corp-proxy.pac
  become: true

# msmtp wants its config to be secret
- file: path=~/.msmtprc mode=0600
- file: path=~/.bugwarriorrc mode=0600
