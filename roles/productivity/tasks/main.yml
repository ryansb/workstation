---
- dnf: name={{ item }} state=latest
  sudo: true
  with_items:
  - python-gertty
  - libcurl-devel
  - redhat-rpm-config
  tags:
  - packages
  when: ansible_distribution == 'Fedora'

- get_url:
    url: "https://raw.githubusercontent.com/ginatrapani/todo.txt-cli/v2.10/todo.sh"
    dest: /usr/local/bin/todo
    mode: '0755'
    owner: root
    group: root
  become: true

- file:
    state: directory
    dest: /home/ryansb/.todo

- copy:
    src: "{{ lookup('file', 'todo.config') }}"
    dest: /home/ryansb/.todo/config

- dnf: name={{ item }} state=absent
  become: true
  with_items:
  - evolution-help
  - evolution-ews
  - evolution
  tags:
  - packages

- include: teensy.yml
  when: ansible_distribution == 'Fedora' and teensy_dev == true

- include: u2f.yml
  when: ansible_distribution == 'Fedora' and u2f_dev == true

- include: github.yml

- dnf: name=msmtp state=latest
  sudo: true
  tags:
  - packages

- shell: creates=~/.local/bin/bugwarrior-pull
         pipsi install bugwarrior

- shell: creates=~/.local/bin/taskforge
         pipsi install taskforge

- shell: creates=~/.local/bin/git-review
         pipsi install git-review

- shell: creates=~/.local/bin/git-sweep
         pipsi install git-sweep

- shell: creates=~/.local/bin/aws
         pipsi install awscli

- shell: creates=~/.local/bin/awslogs
         pipsi install awslogs

- file: path=~/.aws state=directory

- template: src={{ item }}
            dest=~/.{{ item }}
  with_items:
  - bugwarriorrc
  - gertty.yaml
  - mailrc
  - msmtprc
  - taskforgerc
  - aws/config

- copy: src=rht_web_proxy.pac dest=/etc/redhat-corp-proxy.pac
  sudo: true

# msmtp wants its config to be secret
- file: path=~/.msmtprc mode=0600
- file: path=~/.bugwarriorrc mode=0600
